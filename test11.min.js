function setup(){createCanvas(w,h),osc1=new p5.SinOsc,osc2=new p5.SinOsc,osc3=new p5.SinOsc,osc4=new p5.SinOsc,osc5=new p5.SinOsc,delay=new p5.Delay,delay2=new p5.Delay,delay3=new p5.Delay,reverb=new p5.Reverb,env=new p5.Env,env2=new p5.Env,env3=new p5.Env,env4=new p5.Env,osc1.disconnect(),osc1.connect(reverb),env.setRange(1,0),env2.setRange(.5,0),env3.setRange(.2,0),env.setInput(osc1),env2.setInput(osc2),env3.setInput(osc3),env4.setInput(osc4),env.setADSR(.8,.1,0,.3),env2.setADSR(.8,.1,0,.3),env3.setADSR(.05,.4,0,.3),env4.setADSR(1,.9,0,.3),osc2.disconnect(),osc2.connect(reverb),osc3.disconnect(),osc3.connect(reverb),osc4.disconnect(),osc4.connect(reverb),osc5.disconnect(),osc5.connect(reverb),recorder=new p5.SoundRecorder,soundFile=new p5.SoundFile,osc1.start(),osc2.start(),osc3.start(),osc4.start(),osc5.start()}function createAnglePoints(){for(base=0;base<=2;base+=.125)angle=Math.PI*base,anglePoints.push(angle)}function computerMakeMusic(){if(strokeWeight(2),fill(0),targetNumber=Math.floor(random(0,20)),targetNumber2=Math.floor(random(0,20)),targetNumber3=Math.floor(random(0,20)),delay.process(osc3,.5,.5),delay2.process(osc2,$("#green").val(),$("#red").val(),random(500,5e3)),delay3.process(reverb,$("#green").val(),$("#red").val(),random(500,5e3)),2===targetNumber){osc3.freq(midiToFreq(notes[Math.floor(random(notes.length))]-7)+random(-3,3)),env3.play(osc3),xPos=random(0,w),yPos=random(0,h),ellipse(xPos,yPos,50,50),stroke(200,200,200);for(var e=0;e<=anglePoints.length;e++){ellipse(xPos+50*cos(anglePoints[e]),yPos+50*sin(anglePoints[e]),45,45),stroke(200,200,200);for(var o=0;o<=anglePoints.length;o++)ellipse(xPos+60*cos(anglePoints[o]),yPos+60*sin(anglePoints[o]),40,40),stroke(200,200,200);for(var n=0;n<=anglePoints.length;n++)ellipse(xPos+70*cos(anglePoints[n]),yPos+70*sin(anglePoints[n]),35,35),stroke(200,200,200)}}3===targetNumber2&&(osc2.freq(midiToFreq(notes[Math.floor(random(notes.length))]-12)+random(-2,2)),env2.play(osc2),ellipse(random(0,w),random(0,h),50,50),stroke(100,100,0)),4===targetNumber3&&(osc1.freq(midiToFreq(notes[Math.floor(random(notes.length))]-12)+random(-2,2)),env.play(osc1),ellipse(random(0,w),random(0,h),50,50),stroke(20,200,10)),iterations%160===0&&(osc4.freq(midiToFreq(notes[Math.floor(random(notes.length))]-7)+random(-1,1)),env4.play(osc4),ellipse(random(0,w),random(0,h),50,50),stroke(50,50,200)),iterations%100===0&&(osc4.freq(midiToFreq(notes[Math.floor(random(notes.length))]-19)+random(-1,1)),env4.play(osc4),ellipse(random(0,w),random(0,h),50,50),stroke(50,50,200)),keyIsDown(LEFT_ARROW)&&(volume+=.05,volume>1&&(volume=1),osc5.freq(midiToFreq(notes[Math.floor(random(notes.length))]+5)+random(-10,10)),osc5.amp(volume),ellipse(random(0,w),random(0,h),50,50),stroke(200,10,10)),keyIsDown(RIGHT_ARROW)&&(volume=0,osc5.amp(volume)),keyIsDown(BACKSPACE),iterations++}var notes=[60,62,64,67,69,71,72,74,76,79,81,83,84],w=window.innerWidth,h=window.innerHeight,delayOffset=0,iterations=0,auto=setInterval(function(){computerMakeMusic()},100),volume=0,anglePoints=[];createAnglePoints();